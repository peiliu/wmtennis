jQuery(document).ready(function(a){"use strict";function e(){window.console&&console.log.apply(console,arguments)}function t(){window.console&&console.warn.apply(console,arguments)}function r(a,e){var t;a.find('.fw-wizard-step[data-stepId="'+e+'"]').removeClass("fw-current"),a.find('.fw-wizard-step-header[data-stepId="'+e+'"]').removeClass("fw-current"),t=a.find('.fw-progress-step[data-id="'+e+'"]'),t.removeClass("fw-active"),a.find('.fwp-progress-bar .fwp-circle[data-id="'+e+'"]').removeClass("fwp-active")}function n(a,e){var t;a.find('.fw-wizard-step[data-stepId="'+e+'"]').addClass("fw-current"),a.find('.fw-wizard-step-header[data-stepId="'+e+'"]').addClass("fw-current"),t=a.find('.fw-progress-step[data-id="'+e+'"]'),t.addClass("fw-active")}function i(a){a.find(".fw-button-previous").hide()}function s(a){a.find(".fw-button-next").hide()}function f(a){a.find(".fw-button-previous").show()}function o(a){a.find(".fw-button-next").show()}function d(){var e=T(a(this)),t=_(e),s=parseInt(t,10),f=e.find('.fwp-progress-bar .fwp-circle[data-id="'+t+'"]'),d=e.find('.fwp-progress-bar .fwp-bar[data-id="'+(s-1)+'"]');e.find('.fw-progress-step[data-id="'+(s-1)+'"]').removeClass("fw-visited"),e.find('.fw-progress-step[data-id="'+t+'"]').removeClass("fw-visited"),f.removeClass("fwp-done"),f.find(".fwp-label").html(parseInt(t,10)+1),d.removeClass("fwp-active"),s>=2&&e.find('.fwp-progress-bar .fwp-bar[data-id="'+(s-2)+'"]').removeClass("fwp-done").addClass("fwp-active"),r(e,t--),e.find('.fwp-progress-bar .fwp-circle[data-id="'+t+'"]').find(".fwp-label").html(parseInt(t,10)+1),n(e,t),0===t&&i(e),o(e)}function c(){var e=T(a(this)),t=_(e),i=parseInt(t,10),o=e.find('.fwp-progress-bar .fwp-circle[data-id="'+t+'"]'),d=e.find('.fwp-progress-bar .fwp-bar[data-id="'+t+'"]');N(t)&&(e.find('.fw-progress-step[data-id="'+t+'"]').addClass("fw-visited"),o.removeClass("fwp-active").addClass("fwp-done"),o.find(".fwp-label").html("&#10003;"),d.addClass("fwp-active"),i>=1&&e.find('.fwp-progress-bar .fwp-bar[data-id="'+(i-1)+'"]').removeClass("fwp-active").addClass("fwp-done"),r(e,t++),n(e,t),t===F(e)-1&&s(e),f(e),a("html, body").animate({scrollTop:a("#multi-step-form").offset().top-100},500))}function l(a,e,t,r){p(a,t,e.find("h3").text(),e.find(".fw-text-input").val(),r)}function u(a,e,t,r){p(a,t,e.find("h3").text(),e.find(".fw-textarea").val(),r)}function p(a,e,t,r,n){var i={};r?(i[t]=r,R(a,e).push(i)):"true"==n&&(i['<p class="fw-step-summary fw-summary-invalid">'+t]="</p>",R(a,e).push(i))}function w(e,t,r,n){var i=t.find("h3").text(),s="";t.find(".fw-choice").each(function(e,t){a(t).find("input").is(":checked")&&(""!=s&&(s+=", "),s+=a(t).find("label").text())}),p(e,r,i,s,n)}function v(a,e,t,r){p(a,t,e.find("h3").text(),e.find("select").select2("data")[0].text,r)}function m(a,e,t,r){var n,i=e.find("label").text();e.find(".fw-checkbox").is(":checked")&&(n="yes"),e.hasClass("fw-block-invalid"),p(a,t,i,n,r)}function b(e,t,r){return e.find('.fw-wizard-step[data-stepId="'+t+'"]').find(".fw-step-part").each(function(e,t){var n=a(t).find(".fw-step-part-title").text().trim();a(t).find(".fw-step-block").each(function(e,t){var i=a(t).attr("data-required");switch(a(t).attr("data-type")){case"fw-email":case"fw-date":case"fw-text":l(r,a(t),n,i);break;case"fw-textarea":u(r,a(t),n,i);break;case"fw-radio":w(r,a(t),n,i);break;case"fw-select":v(r,a(t),n,i);break;case"fw-checkbox":m(r,a(t),n,i)}})}),""}function h(a){return a.replace(/^.*\\/,"")}function k(){var e=[];return a(".fw-step-block[data-type=fw-file]").each(function(a,t){e.push(g(t))}),e}function g(e){return h(a(e).find("input").val())}function x(a){var e,t=F(a),r={};for(e=0;e<t;e++)b(a,e,r);return r}function C(a){var e="",t=x(a);for(var r in t)e+='<div class="fw-step-summary-part">',e+=y(r),e+=z(t[r]),e+="</div>";return e}function y(a){return'<p class="fw-step-summary-title">'+a+"</p>"}function j(a){var e;for(e in a)return'<p class="fw-step-summary">'+e+" â€” "+a[e]+"</p>"}function z(a){var e,t,r="";for(e=0,t=a.length;e<t;e++)r+=j(a[e]);return r}function I(e){var t=C(e),r=e.find(".fw-wizard-summary");r.empty(),r.append(t),a(".fw-toggle-summary").toggle(function(){a(".fw-wizard-summary").slideDown(),a(".fw-toggle-summary").text(ajax.i18n.hideSummary)},function(){a(".fw-wizard-summary").slideUp(),a(".fw-toggle-summary").text(ajax.i18n.showSummary)}),a(".fw-summary-invalid").length?r.prepend('<div class="fw-summary-alert">'+la[2]+"</div>"):a(".fw-summary-alert").remove()}function T(a){return a.closest(".fw-wizard")}function F(a){return a.attr("data-stepCount")}function _(a){return a.find(".fw-current").attr("data-stepId")}function q(a){return a.closest(".fw-wizard-step").attr("data-stepId")}function S(a){return a.closest(".fw-step-part").attr("data-partId")}function D(a){return a.closest(".fw-step-block").attr("data-blockId")}function A(a){var t=[].slice.call(arguments,1),r=0,n=t.length;if(e("args",t),"0"===t[0])throw new TypeError;for(;r<n;r++)a=E(a,t[r]);return a}function E(a,e){return a[e]||(a[e]={}),a[e]}function O(a,e){var t=q(e),r=S(e),n=D(e);return A(ca,a.attr("id"),t,r,n)}function R(a,t){return e("obj",a,"prop",t),a[t]||(a[t]=[]),a[t]}function W(){var e=a(this),t=T(e),r=e.prop("checked"),n=O(t,e),i=e.attr("data-id");r?n[i]="checked":delete n[i],I(t)}function Z(t,r){var n,i,s,f=t.attr("id"),o=r.attr("name"),d=D(r),c=a('.fw-radio[name="'+o+'"]'),l=!1;e("radios",c),c.each(function(e,t){d!==D(a(t))&&(l=!0)}),n=q(r),i=S(r),l?(s=A(ca,f,n),delete s[i]):(s=A(ca,f,n,i),delete s[d]),I(t)}function P(){var e=a(this),t=e.attr("data-id"),r=e.closest(".fw-conditional");r.find(".fw-conditional-then").removeClass("fw-selected"),r.find('.fw-conditional-then[data-id="'+t+'"]').addClass("fw-selected")}function Q(){var e=a(this),t=T(e);Z(t,e),O(t,e)[e.attr("data-id")]="checked",I(t)}function U(){var t=a(this),r=T(t),n=t.val();e(n);var i=t.attr("data-id");O(r,t)[i]=n,t.parents(".fw-step-block").removeClass("fw-block-invalid"),t.parents(".fw-step-block").find(".fw-block-invalid-alert").remove(),I(r)}function Y(e){var t=!1;return e.children(".fw-choice").find("input").each(function(e,r){a(r).is(":checked")&&(t=!0)}),t||e.addClass("fw-block-invalid"),t}function $(a){var e=!1;return a.find("select").val()&&(e=!0),e}function B(a){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,t=a.find(".fw-text-input").val();return!(!t||!e.test(t))||(a.addClass("fw-block-invalid"),!1)}function G(a){return!!a.find(".fw-file-upload-input").val()||(a.addClass("fw-block-invalid"),!1)}function H(a){return!!a.find(".fw-text-input").val()||(a.addClass("fw-block-invalid"),!1)}function J(a){return!!a.find(".fw-text-input").val()||(a.addClass("fw-block-invalid"),!1)}function K(a){return!!a.find(".fw-textarea").val()||(a.addClass("fw-block-invalid"),!1)}function L(a){return!!a.find(".fw-checkbox").prop("checked")||(a.addClass("fw-block-invalid"),!1)}function M(a){var e=a.find("[data-id=name]").val(),t=a.find("[data-id=email]").val(),r=!0;return e&&t||(a.has("input")?r=!0:(a.addClass("fw-block-invalid"),r=!1)),r}function N(e){var t=!0,r=!0,n=!0;return a('.fw-wizard-step[data-stepid="'+e+'"] .fw-step-block[data-required="true"]').each(function(e,i){var s=a(i);switch(s.attr("data-type")){case"fw-radio":t=Y(s);break;case"fw-select":t=$(s);break;case"fw-textarea":t=K(s);break;case"fw-text":t=J(s);break;case"fw-email":t=B(s),r=t;break;case"fw-file":t=G(s);break;case"fw-date":t=H(s);break;case"fw-checkbox":t=L(s);break;case"fw-submit":t=M(s)}t||(n=!1)}),a('.fw-wizard-step[data-stepid="'+e+'"] .fw-step-block[data-type="fw-email"]').each(function(e,r){var i=a(r);""!=i.find(".fw-text-input").val()&&((t=B(i))||(n=!1))}),n||(a(".fw-block-invalid").each(function(e,t){a(t).find(".fw-block-invalid-alert").length<1&&a(t).append('<div class="fw-block-invalid-alert">'+la[1]+"</div>")}),X(la[0],!1)),n}function V(e){var t=!0;return a(".fw-wizard-step").each(function(e,r){a(r);N(e)||(t=!1)}),t}function X(e,t){a(".fw-alert-user").empty().removeClass("fw-alert-user-fail fw-alert-user-success"),t?a(".fw-alert-user").addClass("fw-alert-user-success").append('<i class="fa fa-check-circle" aria-hidden="true"></i>'):a(".fw-alert-user").addClass("fw-alert-user-fail").append('<i class="fa fa-times-circle" aria-hidden="true"></i>'),a(".fw-alert-user").append(e).fadeIn().delay(2e3).fadeOut()}function aa(e){var t,r,n=[],i=a(this).closest(".fw-wizard");a(".fw-block-invalid").each(function(e,t){a(t).removeClass("fw-block-invalid")}),V(i)&&(a(".fw-spinner").show(),t=x(i),n=k(),r=i.find('[data-id="email"]').first().val(),ea(t,r,n))}function ea(e,r,n){var i=a("#multi-step-form").attr("data-wizardid");a(".fw-btn-submit").html('<i class="fa fa-spinner"></i> '+ajax.i18n.sending),a.post(ajax.ajaxurl,{action:"fw_send_email",id:i,fw_data:e,email:r,attachments:n,nonce:ajax.nonce},function(e){var t=a(".fw-container").attr("data-redirect");t?(window.onbeforeunload=null,window.location.href=t):(a(".fw-btn-submit").addClass("fw-submit-success").html('<i class="fa fa-check-circle"></i> '+ajax.i18n.submitSuccess),a(".fw-btn-submit").unbind("click"))}).fail(function(e){a(".fw-btn-submit").addClass("fw-submit-fail").html('<i class="fa fa-times-circle"></i> '+ajax.i18n.submitError),t("response",e),t("responseText",e.responseText)})}function ta(e,r){var n=a("#multi-step-form").attr("data-wizardid"),i=a(e.target).prop("files")[0],s=new FormData;s.append("action","fw_upload_file"),s.append("file",i),s.append("id",n),s.append("nonce",ajax.nonce),r.find("i").removeClass("fa-upload fa-times-circle fa-check-circle").addClass("fa-spinner"),r.find("span").text(ajax.i18n.uploadingFile);var f=a(e.target).parent().parent();a.ajax({type:"POST",url:ajax.ajaxurl,data:s,contentType:!1,processData:!1,dataType:"json",success:function(a){fa(),a.success?(f.attr("data-uploaded","true"),r.find("i").removeClass("fa-times-circle fa-spinner").addClass(" fa-check-circle"),r.find("span").html(i.name)):(r.find("i").removeClass("fa-spinner fa-check-circle").addClass("fa-times-circle"),r.find("span").html(a.error),t(a.error))},fail:function(a){}})}function ra(e){a.post(ajax.ajaxurl,{action:"fw_delete_files",filenames:e,nonce:ajax.nonce},function(e){e&&a("[data-type=fw-file]").each(function(e,t){var r=a(t).find("input");r.replaceWith(r.val("").clone(!0)),a(t).find("label > i").removeClass("fa-check-circle").addClass("fa-upload"),a(t).find("label > span").text(ajax.i18n.chooseFile),a(t).attr("data-uploaded","false")})}).fail(function(a){t("response",a),t("responseText",a.responseText)})}function na(){a(".fw-file-upload-input").each(function(){var e=a(this),t=e.next("label"),r=t.html(),n=e.parent().parent();e.on("change",function(a){var e="";a.target.value&&(e=a.target.value.split("\\").pop()),e?ta(a,t):t.html(r)}),e.on("click",function(a){if(a.target.value){var e=[];e.push(g(n)),ra(e)}}),e.on("focus",function(){e.addClass("has-focus")}).on("blur",function(){e.removeClass("has-focus")})})}function ia(){a("select").each(function(e,t){a(t).data("search")?a("select").select2({allowClear:!0,placeholder:""}):a(t).select2({minimumResultsForSearch:1/0,allowClear:!0,placeholder:""})})}function sa(){var e=a(".fw-progress-bar").attr("data-activecolor"),t=a(".fw-progress-bar").attr("data-donecolor"),r=a(".fw-progress-bar").attr("data-nextcolor"),n=a(".fw-progress-bar").attr("data-buttoncolor");a("head").append('<style id="fw-colors"></style>'),e&&a("head").append("<style>.fw-active .progress, ul.fw-progress-bar li.fw-active:before{background:"+e+"!important;} [data-type=fw-checkbox] input[type=checkbox]:checked+label:before, ul.fw-progress-bar li.fw-active .fw-txt-ellipsis { color: "+e+" !important; } .fw-step-part { border-color: "+e+" !important; }</style>"),t&&a("head").append("<style>ul.fw-progress-bar .fw-active:last-child:before, .fw-progress-step.fw-visited:before{ background:"+t+" !important; } .fw-progress-step.fw-visited, ul.fw-progress-bar .fw-active:last-child .fw-txt-ellipsis, .fw-progress-step.fw-visited .fw-txt-ellipsis { color:"+t+" !important;} ul.fw-progress-bar li.fw-visited:after{ background-color:"+t+" !important;}</style>"),r&&a("head").append("<style>ul.fw-progress-bar li:before{background:"+r+" !important;} .fw-progress-bar li.fw-active:after, li.fw-progress-step::after{ background-color:"+r+" !important;} .fw-txt-ellipsis { color: "+r+" !important; } </style>"),n&&a("head").append("<style>.fw-button-previous, .fw-button-next, .fw-button-fileupload { background: "+n+" !important; }</style>")}function fa(){a("#multi-step-form").length&&(window.onbeforeunload=function(){return ra(k()),"Your uploaded files were deleted from the server for security reasons."})}function oa(){var e=a(".fw-datepicker-here").attr("data-dateformat");a(".fw-datepicker-here").datepicker({dateFormat:e})}function da(){var e=a(".fw-wizard");e.each(function(e,t){n(a(t),0)});var t=F(e),r=e.parent().outerWidth();(t>=5&&r>=769||r>=500)&&e.addClass("fw-large-container"),a('.fw-progress-step[data-id="0"]').addClass("fw-active"),a(".fw-button-previous").hide(),a(".fw-button-previous").click(d),a(".fw-button-next").click(c),"off"==a(".fw-wizard-summary").attr("data-showsummary")&&a(".fw-toggle-summary").remove(),a(".fw-checkbox").change(W),a(".fw-radio").change(Q),a(".fw-radio-conditional").change(P),a(".fw-text-input").on("change input",U),a(".fw-textarea").on("change input",U),a(".fw-checkbox, .fw-radio").on("change",function(){a(this).parents(".fw-step-block").removeClass("fw-block-invalid"),a(this).parents(".fw-step-block").find(".fw-block-invalid-alert").remove()}),ia(),na(),oa(),a(".fw-btn-submit").click(aa),sa(),I(a(".fw-wizard"))}var ca={},la=[ajax.i18n.errors.requiredFields,ajax.i18n.errors.requiredField,ajax.i18n.errors.someRequired+"<br>"+ajax.i18n.errors.checkFields];!function(){a(document).ready(function(e){a("#multi-step-form").length&&da()})}()}),function(){"use strict"}();